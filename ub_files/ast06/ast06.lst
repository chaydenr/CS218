     1                                 %line 1+1 ast06.asm
     2                                 
     3                                 
     4                                 
     5                                 
     6                                 
     7                                 
     8                                 
     9                                 
    10                                 
    11                                 
    12                                 
    13                                 
    14                                 
    15                                 
    16                                 
    17                                 
    18                                 
    19                                 
    20                                 
    21                                 
    22                                 
    23                                 
    24                                 
    25                                 
    26                                 
    27                                 
    28                                 
    29                                 
    30                                 
    31                                 
    32                                 
    33                                 
    34                                 
    35                                 
    36                                 %line 41+1 ast06.asm
    37                                 
    38                                 
    39                                 
    40                                 
    41                                 
    42                                 
    43                                 
    44                                 
    45                                 
    46                                 
    47                                 
    48                                 
    49                                 
    50                                 
    51                                 
    52                                 
    53                                 
    54                                 
    55                                 
    56                                 
    57                                 
    58                                 
    59                                 %line 69+1 ast06.asm
    60                                 
    61                                 
    62                                 
    63                                 
    64                                 
    65                                 
    66                                 
    67                                 
    68                                 
    69                                 
    70                                 
    71                                 
    72                                 %line 109+1 ast06.asm
    73                                 
    74                                 
    75                                 
    76                                 
    77                                 [section .data]
    78                                 
    79                                 
    80                                 
    81                                 
    82                                 TRUE equ 1
    83                                 FALSE equ 0
    84                                 
    85                                 EXIT_SUCCESS equ 0
    86                                 NOSUCCESS equ 1
    87                                 
    88                                 STDIN equ 0
    89                                 STDOUT equ 1
    90                                 STDERR equ 2
    91                                 
    92                                 SYS_read equ 0
    93                                 SYS_write equ 1
    94                                 SYS_open equ 2
    95                                 SYS_close equ 3
    96                                 SYS_fork equ 57
    97                                 SYS_exit equ 60
    98                                 SYS_creat equ 85
    99                                 SYS_time equ 201
   100                                 
   101                                 LF equ 10
   102                                 SPACE equ " "
   103                                 NULL equ 0
   104                                 ESC equ 27
   105                                 
   106                                 NUMS_PER_LINE equ 4
   107                                 
   108                                 
   109                                 
   110                                 
   111                                 
   112                                 STR_LENGTH equ 12
   113                                 
   114 00000000 202020202020202020-    septRadii db "         +5", NULL, "        +10", NULL, "        +16", NULL
   115 00000000 2B3500202020202020-
   116 00000000 20202B313000202020-
   117 00000000 20202020202B313600 
   118 00000024 20202020202020202B-     db "        +24", NULL, "        +35", NULL, "        +46", NULL
   119 00000024 323400202020202020-
   120 00000024 20202B333500202020-
   121 00000024 20202020202B343600 
   122 00000048 20202020202020202B-     db "        +55", NULL, "        +63", NULL, "       +106", NULL
   123 00000048 353500202020202020-
   124 00000048 20202B363300202020-
   125 00000048 202020202B31303600 
   126 0000006C 202020202020202B31-     db "       +143", NULL, "       +144", NULL, "       +155", NULL
   127 0000006C 343300202020202020-
   128 0000006C 202B31343400202020-
   129 0000006C 202020202B31353500 
   130 00000090 2020202020202D3235-     db "      -2542", NULL, "      -1610", NULL, "      -1361", NULL
   131 00000090 343200202020202020-
   132 00000090 2D3136313000202020-
   133 00000090 2020202D3133363100 
   134 000000B4 202020202020202B32-     db "       +266", NULL, "       +330", NULL, "       +421", NULL
   135 000000B4 363600202020202020-
   136 000000B4 202B33333000202020-
   137 000000B4 202020202B34323100 
   138 000000D8 202020202020202B35-     db "       +502", NULL, "       +516", NULL, "       +642", NULL
   139 000000D8 303200202020202020-
   140 000000D8 202B35313600202020-
   141 000000D8 202020202B36343200 
   142 000000FC 2020202020202B3131-     db "      +1161", NULL, "      +1135", NULL, "      +1246", NULL
   143 000000FC 363100202020202020-
   144 000000FC 2B3131333500202020-
   145 000000FC 2020202B3132343600 
   146 00000120 2020202020202D3131-     db "      -1116", NULL, "      -1000", NULL, "       -136", NULL
   147 00000120 313600202020202020-
   148 00000120 2D3130303000202020-
   149 00000120 202020202D31333600 
   150 00000144 2020202020202B3135-     db "      +1540", NULL, "      +1651", NULL, "      +2151", NULL
   151 00000144 343000202020202020-
   152 00000144 2B3136353100202020-
   153 00000144 2020202B3231353100 
   154 00000168 2020202020202B3231-     db "      +2161", NULL, "     +10063", NULL, "     -11341", NULL
   155 00000168 36310020202020202B-
   156 00000168 313030363300202020-
   157 00000168 20202D313133343100 
   158 0000018C 20202020202B313232-     db "     +12224", NULL
   159 0000018C 323400             
   160                                 
   161 00000198 2D343600               aSeptLength db "-46", NULL
   162 0000019C 00000000               length dd 0
   163                                 
   164 000001A0 00000000               diamSum dd 0
   165 000001A4 00000000               diamAve dd 0
   166 000001A8 00000000               diamMin dd 0
   167 000001AC 00000000               diamMax dd 0
   168                                 
   169                                 
   170                                 
   171                                 
   172 000001B0 2D2D2D2D2D2D2D2D2D-    hdr db "-----------------------------------------------------"
   173 000001B0 2D2D2D2D2D2D2D2D2D-
   174 000001B0 2D2D2D2D2D2D2D2D2D-
   175 000001B0 2D2D2D2D2D2D2D2D2D-
   176 000001B0 2D2D2D2D2D2D2D2D2D-
   177 000001B0 2D2D2D2D2D2D2D2D   
   178 000001E5 0A1B5B316D43532032-     db LF, ESC, "[1m", "CS 218 - Assignment #6", ESC, "[0m", LF
   179 000001E5 3138202D2041737369-
   180 000001E5 676E6D656E74202336-
   181 000001E5 1B5B306D0A         
   182 00000205 4469616D6574657220-     db "Diameter Calculations", LF, LF
   183 00000205 43616C63756C617469-
   184 00000205 6F6E730A0A         
   185 0000021C 4469616D6574657273-     db "Diameters:", LF, NULL
   186 0000021C 3A0A00             
   187 00000228 0A4469616D65746572-    shdr db LF, "Diameters Sum:  ", NULL
   188 00000228 732053756D3A202000 
   189 0000023A 0A4469616D65746572-    avhdr db LF, "Diameters Ave:  ", NULL
   190 0000023A 73204176653A202000 
   191 0000024C 0A4469616D65746572-    minhdr db LF, "Diameters Min:  ", NULL
   192 0000024C 73204D696E3A202000 
   193 0000025E 0A4469616D65746572-    maxhdr db LF, "Diameters Max:  ", NULL
   194 0000025E 73204D61783A202000 
   195                                 
   196 00000270 0A00                   newLine db LF, NULL
   197 00000272 20202000               spaces db "   ", NULL
   198                                 
   199 00000276 02000000               ddTwo dd 2
   200                                 
   201                                 
   202                                 
   203                                 
   204                                 [section .bss]
   205                                 
   206 00000000 <gap>                  tmpInteger resd 1
   207                                 
   208 00000004 <gap>                  diamsArray resd 34
   209                                 
   210 0000008C <gap>                  lenString resb STR_LENGTH
   211 00000098 <gap>                  tempString resb STR_LENGTH
   212                                 
   213 000000A4 <gap>                  diamSumString resb STR_LENGTH
   214 000000B0 <gap>                  diamAveString resb STR_LENGTH
   215 000000BC <gap>                  diamMinString resb STR_LENGTH
   216 000000C8 <gap>                  diamMaxString resb STR_LENGTH
   217                                 
   218                                 
   219                                 
   220                                 [section .text]
   221                                 [global _start]
   222                                 _start:
   223                                 
   224                                 
   225                                 
   226                                 
   227                                 
   228                                 %line 214+0 ast06.asm
   229                                 
   230                                 
   231                                 
   232                                 
   233                                 
   234                                 
   235                                 
   236                                 
   237                                 
   238                                 
   239                                 
   240                                 
   241                                 
   242                                 
   243                                 
   244                                 
   245                                 
   246                                 
   247                                 
   248                                 
   249                                 
   250                                 
   251                                 
   252                                 
   253                                 
   254                                 %line 215+1 ast06.asm
   255                                 
   256                                 
   257                                 
   258                                 
   259                                 
   260                                 
   261                                 
   262 00000000 48C7C000000000         mov rax, 0
   263 00000007 49C7C100000000         mov r9, 0
   264 0000000E 49C7C200000000         mov r10, 0
   265 00000015 49C7C300000000         mov r11, 0
   266 0000001C 49C7C401000000         mov r12, 1
   267                                 
   268                                 
   269 00000023 48C7C0[00000000]       mov rax, aSeptLength
   270                                 
   271                                 startRead:
   272                                 
   273 0000002A 468A0C10               mov r9b, byte[rax + r10*1]
   274                                 
   275                                 
   276 0000002E 4180F920               cmp r9b, " "
   277                                 
   278 00000032 7419                   je nextLetter
   279                                 
   280                                 
   281 00000034 4180F900               cmp r9b, NULL
   282 00000038 7418                   je readDone
   283                                 
   284                                 
   285 0000003A 4180F92D               cmp r9b, "-"
   286 0000003E 7505                   jne posNum
   287 00000040 49C7C4FFFFFFFF         mov r12, -1
   288                                 
   289                                 
   290                                 posNum:
   291 00000047 4180F92B               cmp r9b, "+"
   292 0000004B 7500                   jne calcNum
   293 0000004D EBFE                   jmp nextLetter
   294                                 
   295                                 calcNum:
   296                                 
   297                                 
   298                                 
   299                                 nextLetter:
   300                                 
   301 0000004F 49FFC2                 inc r10
   302 00000052 EBD4                   jmp startRead
   303                                 
   304                                 readDone:
   305                                 
   306                                 
   307                                 
   308                                 
   309                                 
   310                                 
   311 00000054 8B0C25[00000000]        mov ecx, dword [length]
   312 0000005B 48C7C700000000          mov rdi, 0
   313 00000062 48C7C3[00000000]        mov rbx, septRadii
   314                                 cvtLoop:
   315 00000069 53                      push rbx
   316 0000006A 51                      push rcx
   317 0000006B 57                      push rdi
   318                                 
   319                                 %line 278+0 ast06.asm
   320                                 
   321                                 
   322                                 
   323                                 %line 279+1 ast06.asm
   324 0000006C 5F                      pop rdi
   325 0000006D 59                      pop rcx
   326 0000006E 5B                      pop rbx
   327                                 
   328 0000006F 8B0425[00000000]        mov eax, dword [tmpInteger]
   329 00000076 F72425[00000000]        mul dword [ddTwo]
   330 0000007D 8904BD[00000000]        mov dword [diamsArray+rdi*4], eax
   331 00000084 4883C30C                add rbx, STR_LENGTH
   332                                 
   333 00000088 48FFC7                  inc rdi
   334 0000008B FFC9                    dec ecx
   335 0000008D 83F900                  cmp ecx, 0
   336 00000090 75D5                    jne cvtLoop
   337                                 
   338                                 
   339                                 
   340                                 
   341 00000092 8B0C25[00000000]        mov ecx, dword [length]
   342 00000099 48C7C600000000          mov rsi, 0
   343 000000A0 49C7C400000000          mov r12, 0
   344                                 printLoop:
   345 000000A7 51                      push rcx
   346 000000A8 56                      push rsi
   347 000000A9 4154                    push r12
   348                                 
   349 000000AB 8B04B5[00000000]        mov eax, dword [diamsArray+rsi*4]
   350                                 
   351                                 %line 305+0 ast06.asm
   352                                 
   353                                 
   354                                 
   355                                 %line 306+1 ast06.asm
   356                                 
   357                                 
   358                                 %line 307+0 ast06.asm
   359                                 
   360                                 
   361                                 
   362                                 
   363                                 
   364                                 
   365                                 
   366                                 
   367                                 
   368                                 
   369                                 
   370                                 
   371                                 
   372                                 
   373                                 
   374                                 
   375                                 
   376                                 
   377                                 
   378                                 
   379                                 
   380                                 
   381                                 
   382                                 
   383                                 
   384                                 %line 308+1 ast06.asm
   385                                 
   386                                 %line 308+0 ast06.asm
   387                                 
   388                                 
   389                                 
   390                                 
   391                                 
   392                                 
   393                                 
   394                                 
   395                                 
   396                                 
   397                                 
   398                                 
   399                                 
   400                                 
   401                                 
   402                                 
   403                                 
   404                                 
   405                                 
   406                                 
   407                                 
   408                                 
   409                                 
   410                                 
   411                                 
   412                                 %line 309+1 ast06.asm
   413                                 
   414 000000B2 415C                    pop r12
   415 000000B4 5E                      pop rsi
   416 000000B5 59                      pop rcx
   417                                 
   418 000000B6 49FFC4                  inc r12
   419 000000B9 4983FC04                cmp r12, 4
   420 000000BD 7505                    jne skipNewline
   421 000000BF 49C7C400000000          mov r12, 0
   422                                 
   423                                 %line 318+0 ast06.asm
   424                                 
   425                                 
   426                                 
   427                                 
   428                                 
   429                                 
   430                                 
   431                                 
   432                                 
   433                                 
   434                                 
   435                                 
   436                                 
   437                                 
   438                                 
   439                                 
   440                                 
   441                                 
   442                                 
   443                                 
   444                                 
   445                                 
   446                                 
   447                                 
   448                                 
   449                                 %line 319+1 ast06.asm
   450                                 skipNewline:
   451 000000C6 48FFC6                  inc rsi
   452                                 
   453 000000C9 FFC9                    dec ecx
   454 000000CB 83F900                  cmp ecx, 0
   455 000000CE 75D5                    jne printLoop
   456                                 
   457                                 %line 325+0 ast06.asm
   458                                 
   459                                 
   460                                 
   461                                 
   462                                 
   463                                 
   464                                 
   465                                 
   466                                 
   467                                 
   468                                 
   469                                 
   470                                 
   471                                 
   472                                 
   473                                 
   474                                 
   475                                 
   476                                 
   477                                 
   478                                 
   479                                 
   480                                 
   481                                 
   482                                 
   483                                 %line 326+1 ast06.asm
   484                                 
   485                                 
   486                                 
   487                                 
   488                                 
   489                                 
   490                                 
   491                                 
   492                                 
   493                                 
   494                                 
   495                                 
   496                                 
   497                                 
   498                                 
   499                                 
   500                                 %line 341+0 ast06.asm
   501                                 
   502                                 
   503                                 
   504                                 
   505                                 
   506                                 
   507                                 
   508                                 
   509                                 
   510                                 
   511                                 
   512                                 
   513                                 
   514                                 
   515                                 
   516                                 
   517                                 
   518                                 
   519                                 
   520                                 
   521                                 
   522                                 
   523                                 
   524                                 
   525                                 
   526                                 %line 342+1 ast06.asm
   527                                 
   528                                 
   529                                 
   530                                 
   531                                 
   532                                 
   533                                 
   534                                 
   535                                 
   536                                 
   537                                 
   538                                 %line 352+0 ast06.asm
   539                                 
   540                                 
   541                                 
   542                                 
   543                                 
   544                                 
   545                                 
   546                                 
   547                                 
   548                                 
   549                                 
   550                                 
   551                                 
   552                                 
   553                                 
   554                                 
   555                                 
   556                                 
   557                                 
   558                                 
   559                                 
   560                                 
   561                                 
   562                                 
   563                                 
   564                                 %line 353+1 ast06.asm
   565                                 
   566                                 
   567                                 
   568                                 
   569                                 
   570                                 
   571                                 %line 358+0 ast06.asm
   572                                 
   573                                 
   574                                 
   575                                 
   576                                 
   577                                 
   578                                 
   579                                 
   580                                 
   581                                 
   582                                 
   583                                 
   584                                 
   585                                 
   586                                 
   587                                 
   588                                 
   589                                 
   590                                 
   591                                 
   592                                 
   593                                 
   594                                 
   595                                 
   596                                 
   597                                 %line 359+1 ast06.asm
   598                                 
   599                                 %line 359+0 ast06.asm
   600                                 
   601                                 
   602                                 
   603                                 %line 360+1 ast06.asm
   604                                 
   605                                 %line 360+0 ast06.asm
   606                                 
   607                                 
   608                                 
   609                                 
   610                                 
   611                                 
   612                                 
   613                                 
   614                                 
   615                                 
   616                                 
   617                                 
   618                                 
   619                                 
   620                                 
   621                                 
   622                                 
   623                                 
   624                                 
   625                                 
   626                                 
   627                                 
   628                                 
   629                                 
   630                                 
   631                                 %line 361+1 ast06.asm
   632                                 
   633                                 
   634                                 %line 362+0 ast06.asm
   635                                 
   636                                 
   637                                 
   638                                 
   639                                 
   640                                 
   641                                 
   642                                 
   643                                 
   644                                 
   645                                 
   646                                 
   647                                 
   648                                 
   649                                 
   650                                 
   651                                 
   652                                 
   653                                 
   654                                 
   655                                 
   656                                 
   657                                 
   658                                 
   659                                 
   660                                 %line 363+1 ast06.asm
   661                                 
   662                                 %line 363+0 ast06.asm
   663                                 
   664                                 
   665                                 
   666                                 %line 364+1 ast06.asm
   667                                 
   668                                 %line 364+0 ast06.asm
   669                                 
   670                                 
   671                                 
   672                                 
   673                                 
   674                                 
   675                                 
   676                                 
   677                                 
   678                                 
   679                                 
   680                                 
   681                                 
   682                                 
   683                                 
   684                                 
   685                                 
   686                                 
   687                                 
   688                                 
   689                                 
   690                                 
   691                                 
   692                                 
   693                                 
   694                                 %line 365+1 ast06.asm
   695                                 
   696                                 
   697                                 %line 366+0 ast06.asm
   698                                 
   699                                 
   700                                 
   701                                 
   702                                 
   703                                 
   704                                 
   705                                 
   706                                 
   707                                 
   708                                 
   709                                 
   710                                 
   711                                 
   712                                 
   713                                 
   714                                 
   715                                 
   716                                 
   717                                 
   718                                 
   719                                 
   720                                 
   721                                 
   722                                 
   723                                 %line 367+1 ast06.asm
   724                                 
   725                                 %line 367+0 ast06.asm
   726                                 
   727                                 
   728                                 
   729                                 %line 368+1 ast06.asm
   730                                 
   731                                 %line 368+0 ast06.asm
   732                                 
   733                                 
   734                                 
   735                                 
   736                                 
   737                                 
   738                                 
   739                                 
   740                                 
   741                                 
   742                                 
   743                                 
   744                                 
   745                                 
   746                                 
   747                                 
   748                                 
   749                                 
   750                                 
   751                                 
   752                                 
   753                                 
   754                                 
   755                                 
   756                                 
   757                                 %line 369+1 ast06.asm
   758                                 
   759                                 
   760                                 %line 370+0 ast06.asm
   761                                 
   762                                 
   763                                 
   764                                 
   765                                 
   766                                 
   767                                 
   768                                 
   769                                 
   770                                 
   771                                 
   772                                 
   773                                 
   774                                 
   775                                 
   776                                 
   777                                 
   778                                 
   779                                 
   780                                 
   781                                 
   782                                 
   783                                 
   784                                 
   785                                 
   786                                 %line 371+1 ast06.asm
   787                                 
   788                                 %line 371+0 ast06.asm
   789                                 
   790                                 
   791                                 
   792                                 
   793                                 
   794                                 
   795                                 
   796                                 
   797                                 
   798                                 
   799                                 
   800                                 
   801                                 
   802                                 
   803                                 
   804                                 
   805                                 
   806                                 
   807                                 
   808                                 
   809                                 
   810                                 
   811                                 
   812                                 
   813                                 
   814                                 %line 372+1 ast06.asm
   815                                 
   816                                 
   817                                 
   818                                 
   819                                 last:
   820 000000D0 48C7C03C000000          mov rax, SYS_exit
   821 000000D7 48C7C700000000          mov rdi, EXIT_SUCCESS
   822 000000DE 0F05                    syscall
   823                                 
